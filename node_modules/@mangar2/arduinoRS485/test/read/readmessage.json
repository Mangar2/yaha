[
    {
        "description": "Valid Messages",
        "version": 1,
        "tests": [
            {
                "description": "normal message",
                "serialData": [2, 1, 2, 9, 97, 0, 1, 3, 223],
                "expected": [{
                    "version": 1,
                    "sender": 2,
                    "receiver": 1,
                    "reply": false,
                    "command": "a",
                    "value": 1
                }]
            },
            {
                "description": "Message with noise",
                "serialData": [0, 0, 128, 2, 1, 2, 9, 97, 0, 1, 3, 223],
                "expected": [{
                    "version": 1,
                    "sender": 2,
                    "receiver": 1,
                    "reply": false,
                    "command": "a",
                    "value": 1
                }]
            },
            {
                "description": "Two messages",
                "serialData": [
                    2, 1, 2, 9, 97, 0, 1, 3, 223, 
                    2, 1, 2, 9, 108, 0, 1, 82, 157
                ],
                "expected": [{ "command": "a" }, { "command": "l" }]
            },
            {
                "description": "Two messages with noise inbetween",
                "serialData": [
                    2, 1, 2, 9, 97, 0, 1, 3, 223, 
                    0, 0, 
                    2, 1, 2, 9, 108, 0, 1,  82, 157
                ],
                "expected": [{ "command": "a" }, { "command": "l" }]
            },
            {
                "description": "three messages with noise",
                "serialData": [
                    2, 1, 2, 9, 97, 0, 1, 3, 223, 
                    0, 0, 
                    2, 1, 2, 9, 108, 0, 1, 82, 157, 
                    2, 1, 2, 9, 97, 0, 1, 3, 223
                ],
                "expected": [{ "command": "a" }, { "command": "l" }, { "command": "a" }]
            },
            {
                "description": "Second message is incomplete",
                "serialData": [
                    2, 1, 2, 9, 97, 0, 1, 3, 223, 
                    2, 1, 2, 9, 108, 0, 1
                ],
                "expected": [{ "command": "a" }, "Insufficient data received"]
            },
            {
                "description": "First message has errors, second message is ok",
                "serialData": [
                    2, 1, 2, 9, 97, 0, 1,  0, 255, 
                    2, 1, 2, 9, 108, 0, 1, 82, 157
                ],
                "expected": ["CRC does not match.", { "command": "l" }]
            }
        ]
    },
    {
        "description": "Invalid Messages",
        "version": 1,
        "tests": [
            {
                "description": "CRC 16 Error",
                "serialData": [2, 1, 2, 9, 97, 0, 1, 3, 222],
                "startIndex": 0,
                "expected": ["CRC does not match. Expected: df03 Found: de03"]
            },
            {
                "description": "Insufficient Data",
                "serialData": [2, 1, 2, 9, 97, 0, 1],
                "startIndex": 0,
                "expected": ["Insufficient data received"]
            },
            {
                "description": "Treat first byte as noise",
                "serialData": [128, 1, 2, 9, 97, 1, 1, 98],
                "startIndex": 0,
                "expected": ["Version not supported: 4"]
            },
            {
                "description": "Illegal receiver address",
                "serialData": [2, 128, 2, 9, 97, 1, 1, 227],
                "startIndex": 0,
                "expected": ["Illegal receiver address 128"]
            }
        ]
    }
]