[
    {
        "description": "no duration",
        "rule": {
            "rules": {
                "alarm": {
                    "anyOf": [
                        "first/required/motion"
                    ],
                    "topic": {
                        "test": 0
                    }
                }
            }
        },
        "motionTopics": [
            "+/+/motion",
            "$SYS/+/set"
        ],
        "tests": [
            {
                "description": "with required event",
                "time": "7:00",
                "motions": {
                    "first/required/motion": "7:00"
                },
                "expected": {
                    "messages": [
                        {
                            "topic": "test",
                            "value": 0
                        }
                    ]
                }
            }
        ]
    },
    {
        "description": "with duration",
        "rule": {
            "rules": {
                "alarm": {
                    "anyOf": [
                        "first/required/motion"
                    ],
                    "durationWithoutMovementInMinutes": 15,
                    "topic": {
                        "test": 0
                    }
                }
            }
        },
        "motionTopics": [
            "+/+/motion",
            "$SYS/+/set"
        ],
        "tests": [
            {
                "description": "too early",
                "time": "7:14",
                "motions": {
                    "first/required/motion": "7:00"
                },
                "expected": {
                    "messages": []
                }
            },
            {
                "description": "late enough",
                "time": "7:15",
                "motions": {
                    "first/required/motion": "7:00"
                },
                "expected": {
                    "messages": [
                        {
                            "topic": "test",
                            "value": 0
                        }
                    ]
                }
            }
        ]
    },
    {
        "description": "with duration, no motion required",
        "rule": {
            "rules": {
                "alarm": {
                    "durationWithoutMovementInMinutes": 15,
                    "topic": {
                        "test": 0
                    }
                }
            }
        },
        "motionTopics": [
            "+/+/motion",
            "$SYS/+/set"
        ],
        "tests": [
            {
                "description": "too early",
                "time": "7:14",
                "motions": {
                    "first/required/motion": "7:00"
                },
                "expected": {
                    "messages": [],
                    "subscriptions": {
                        "+/+/motion": 2,
                        "$SYS/+/set": 2,
                        "$SYS/simulation/#": 1
                    }
                }
            },
            {
                "description": "late enough",
                "time": "7:15",
                "motions": {
                    "first/required/motion": "7:00"
                },
                "expected": {
                    "messages": [
                        {
                            "topic": "test",
                            "value": 0
                        }
                    ]
                }
            }
        ]
    }
]