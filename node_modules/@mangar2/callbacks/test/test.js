/**
 * ---------------------------------------------------------------------------------------------------
 * This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
 * "as is", without any support, and with no warranty, express or implied, as to its usefulness for
 * any purpose.
 *
 * File:      test.js
 *
 * Author:      Volker Böhm
 * Copyright:   Volker Böhm
 * ---------------------------------------------------------------------------------------------------
 */

'use strict'

const Callbacks = require('@mangar2/callbacks')
const UnitTest = require('@mangar2/unittest')
const callbacks = new Callbacks(['test'])

const unitTest = new UnitTest(false)

callbacks.on('test', (...param) => {
    unitTest.assertDeepEqual(param, ['hello world', 1, 2], 'function called')
})

callbacks.invokeCallback('test', 'hello world', 1, 2)
unitTest.assertEqual(callbacks.invokeCallback('undefined'), null, 'calling undefined callbacks returns null')
unitTest.expectException(() => callbacks.on('unsupported', () => { console.log('test') }), 'Error', 'exception on not supported event')
unitTest.expectException(() => callbacks.on('test', [1]), 'Error', 'exception on callback is not a function')

unitTest.showResult(4)
