<!-- This file is generated by jsmddoc version 0.1 -->

# Abstract

Provides a JSON based term evaluator to calculate decisions based on configuration files

## Contents

- [Meta](#Meta)
- [Global Functions](#Global-functions)
- [Class: Decision](#Class:-Decision)
  - [Parameters](#Decision-Parameters)
  - [Members](#Decision-Members)
  - [Methods](#Decision-Methods)
    - [eval](#eval)
    - [on](#on)
- [Class: EvalResult](#Class:-EvalResult)
  - [Parameters](#EvalResult-Parameters)
  - [Members](#EvalResult-Members)
  - [Methods](#EvalResult-Methods)

## Meta

| | |
| --- | --- |
| **File** | decision.js |
| **Abstract** | Provides a JSON based term evaluator to calculate decisions based on configuration files |
| **Author** | Volker Böhm |
| **Copyright** | Copyright ( c ) 2020 Volker Böhm |
| **License** | This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3 . It is furnished "as is" , without any support , and with no warranty , express or implied , as to its usefulness for any purpose . |

## Class: Decision

`new Decision(variables)`

Creates a value class providing the ability to evalutate a json based value . Additionally it explains the value in a juman readable string . Supported operations are { or: [ ] } { and: [ ] } { operator , variable , value } with operators '>' , '<' , '> = ' , '< = ' , ' ! = ' , ' = ' { variable } { variable . . . [ map ] } where map is an array of variable value maps . Example [ 'a':1 , 'b':2 ] maps a to 1 and b to 2 { function , parameter: [ ] } where function is registrated by a call to 'on' The value tree supports:

### Example

```javascript
const variables = {
   'a/b': 1,
   'b/c': 2,
   'system/presence': 'awake'
}
const value = new Decision(variables)
const result = value.decide(
     [
          'and',
          ['or', ['below', 'a/b', 10], ['below', 'b/c', 2]],
          ['or', ['above or equal', 'a/b', 10], ['above or equal', 'b/c', 2]]
      ]
)
// returns result.value = true and result.reason = 'a/b (1) is below 10 and b/c (2) is above or equal 2'
```

### Decision Parameters

| Name | Type | Attribute | Default | Description |
| ---- | ---- | ---- | ---- | ----------- |
| `variables` | `Object` | optional | { } | list of known variables and values | |

### Decision Members


### Decision Methods

#### eval

`eval (jsonTree) => {EvalResult}`

Calculates a value based on a json based json tree

##### eval Parameters

| Name | Type | Description |
| ---- | ---- | ---- | ---- | ----------- |
| `jsonTree` | `Object` | json structured boolean logic | |

##### eval throws

| Type | Description |
| ---- | ----------- |
| `Error` | on any error in the jsonTree |

##### eval returns

| Type | Description |
| ---- | ----------- |
| `EvalResult` | result of the evaluation |

#### on

`on (event, callback)`

Sets a callback .

##### on Parameters

| Name | Type | Description |
| ---- | ---- | ---- | ---- | ----------- |
| `event` | `string` | event name ( not case sensitive ) for the callback | |
| `callback` | `function` | ( parameter ) | |

##### on throws

| Type | Description |
| ---- | ----------- |
| `Error` | if the callback is not 'function' |

## Class: EvalResult

`new EvalResult(value, reason)`

Creates a result object with a "value" and a "reason" and a list of used variable: value pairs

### EvalResult Parameters

| Name | Type | Description |
| ---- | ---- | ---- | ---- | ----------- |
| `value` | `Date, string, number, boolean` | evaluation value | |
| `reason` | `string` | value reason in human readable form | |

### EvalResult Members

| Name | Type | description |
| ---- | ---- | ---- | ---------- |
| `reason` | `string` | Reason explaining the result |
| `value` | `Date, string, number, boolean` | Value of the result |
| `variables` | `Array.<string>` | List of missing variables found |

### EvalResult Methods
