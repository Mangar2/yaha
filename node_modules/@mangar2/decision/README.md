<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [DecisionResult][1]
    -   [Parameters][2]
    -   [Properties][3]
    -   [decision][4]
    -   [decision][5]
        -   [Parameters][6]
    -   [reason][7]
    -   [reason][8]
        -   [Parameters][9]
    -   [addAnd][10]
        -   [Parameters][11]
    -   [addOr][12]
        -   [Parameters][13]
-   [Decision][14]
    -   [Parameters][15]
    -   [Examples][16]
    -   [on][17]
        -   [Parameters][18]
    -   [decide][19]
        -   [Parameters][20]

## 

**Meta**

-   **copyright**: Copyright (c) 2020 Volker Böhm

-   **author**: Volker Böhm
-   **license**: This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
    "as is", without any support, and with no warranty, express or implied, as to its usefulness for
    any purpose.

## DecisionResult

Creates a decision result object

### Parameters

-   `decision`  
-   `reason`   (optional, default `''`)

### Properties

-   `decision` **[boolean][21]** boolean decision
-   `reason` **[string][22]** decision reason in human readable form

### decision

Gets the decision (true/false)

Returns **[boolean][21]** 

### decision

Sets the decision (true/false)

#### Parameters

-   `decision` **[boolean][21]** 

### reason

Gets the reason

Returns **[string][22]** 

### reason

Sets the reason

#### Parameters

-   `reason` **[string][22]** 

### addAnd

Adds the result of an And node evaluation

#### Parameters

-   `nodeResult` **[DecisionResult][23]** result of a node evaluation

### addOr

Adds the result of an Or node evaluation

#### Parameters

-   `nodeResult` **[DecisionResult][23]** result of a node evaluation

## Decision

Creates a decision class providing the ability to evalutate a json based decision. Additionally it explains the
decision in a juman readable string. Supported operations are
{or: \[]}
{and: \[]}
{operator, variable, value} with operators '>', '&lt;', '>=', '&lt;=', '!=', '='
{variable}
{variable ...[map]} where map is an array of variable value maps. Example ['a':1, 'b':2] maps a to 1 and b to 2
{function, parameter: \[]} where function is registrated by a call to 'on'
The decision tree supports:

### Parameters

-   `variables` **[Object][24]** list of known variables and values

### Examples

```javascript
const variables = {
   'a/b': 1,
  'b/c': 2,
  'system/presence': 'awake'
}
const decision = new Decision(variables)
const result = decision.decide({
      and: [{
          variable: 'a/b',
          operator: 'below',
          value: 16
      },
      {
          variable: 'b/c',
          operator: 'above',
          value: {
              variable: 'system/presence',
              absent: 1,
              awake: 2,
              sleeping: 3
          }
      }]
})
// returns result.decision = false and result.reason = 'b/c (2) is not above 2'
```

### on

Sets a callback.

#### Parameters

-   `event` **[string][22]** event name (not case sensitive) for the callback
-   `callback` **[function][25]** (parameter)


-   Throws **[Error][26]** if the callback is not 'function'

### decide

Calculates a decision based on a json based decision tree

#### Parameters

-   `jsonTree` **[Object][24]** json structured boolean logic

Returns **[DecisionResult][23]** result of the decision

[1]: #decisionresult

[2]: #parameters

[3]: #properties

[4]: #decision

[5]: #decision-1

[6]: #parameters-1

[7]: #reason

[8]: #reason-1

[9]: #parameters-2

[10]: #addand

[11]: #parameters-3

[12]: #addor

[13]: #parameters-4

[14]: #decision-2

[15]: #parameters-5

[16]: #examples

[17]: #on

[18]: #parameters-6

[19]: #decide

[20]: #parameters-7

[21]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[22]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[23]: #decisionresult

[24]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[25]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[26]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error
