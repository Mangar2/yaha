# Abstract

This is a very simple http/https services, a web client and a web server. They are based on the http/https packets included in node.js.
I built it due to its simplicity and the independence from other packages

## Client

### Client Functionality

The class provides a simple interface to publish data to clients.
const client = require ('@mangar2/httpservice').HttpClient
const client = require ('@mangar2/httpservice').HttpsClient

### Client Usage example

* Create a lient with host and port
  let client = new HttpClient("127.0.0.1", 9001);
* Register a callback to get the result
  client.on("result", result => console.log(result))
* Send a GET to 127.0.0.1:9001/clients with the body test
  client.send("/clients", "GET", "test", {'Content-Type': 'application/json', packetId: 1, mqttpacket: "publish"} );

### Client supported callbacks

* result(statusCode, headers, payload)
* error(err) or any error

### Client close

The static close method closes all open connections for all pending requests

## Server

const server = require ('@mangar2/httpservice').HttpServer
const server = require ('@mangar2/httpservice').HttpsServer

### Server Functionality

constuct the server with new Server(port number).
register your callbacks according to the http functions you need. Supported are
put, patch, get, post, delete (it does not matter, if you use upper or lower case letters)
All those functions receives 4 parameters:

* payload: the data sent (body)
* headers: the http header structure
* path: the path as string
* res: the http res structure

### Server Usage example

server = new HttpServer(9001);
server.on('get', (payload, headers, path, res) => {
    console.log('get received');
    console.log(payload);
    console.log(headers);
    console.log(path);
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end("get");
});

### listen and closed callbacks

The web server additionally supports the callbacks "listen" and "closed" called, once the server is listening and once the server is closed. Both callbacks have no parameters.

### Server close

The server has a close function that closes all active socket connections and shuts down the server.