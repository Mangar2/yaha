<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [ReasonEntry][1]
    -   [Properties][2]
-   [Reason][3]
-   [Message][4]
    -   [Parameters][5]
    -   [Examples][6]
    -   [value][7]
        -   [Parameters][8]
    -   [value][9]
    -   [addReason][10]
        -   [Parameters][11]
    -   [getDateOfNewestChange][12]
    -   [toJSON][13]
    -   [validate][14]
        -   [Parameters][15]

## 

**Meta**

-   **copyright**: Copyright (c) 2020 Volker Böhm

-   **author**: Volker Böhm
-   **license**: This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
    "as is", without any support, and with no warranty, express or implied, as to its usefulness for
    any purpose.

## ReasonEntry

Type: [Object][16]

### Properties

-   `timestamp` **[string][17]** of the event in ISO format
-   `message` **[string][17]** event message

## Reason

Type: [Array][18]&lt;[ReasonEntry][19]>

## Message

Basic class holding MQTT messages.
The yaha home automation is based on messages. Nothing happens without a message. The message runs from creator to broker and then to the receiver. On every step, a reason will added including a timestamp to get a full trace.
Some values are automatically converted ('on'/'off' to 1/0, same for 'true'/'false' and true/false, Number strings are converted to numbers)

### Parameters

-   `topic` **[string][17]** topic string
-   `value` **([string][17] \| [number][20])** value to set topic to (optional, default `''`)
-   `reason` **([string][17] \| [Reason][21])** explaining, why the topic will be set to value (optional, default `null`)
-   `now` **[Date][22]** current time (optional, default `newDate()`)

### Examples

```javascript
const message = new Message('this/is/a/topic', 'a value', 'a reason')
```

### value

Sets value as an uniform value

#### Parameters

-   `value` **([string][17] | bool | [number][20])** 

### value

gets the value of the message
booleans or strings 'true'/'false' are transformed to 0/1
number strings are transfored to numbers
'on'/'off' are transformed to 1/0

Returns **([string][17] \| [number][20])** value in a uniform format

### addReason

Adds a reason to the reason array

#### Parameters

-   `reason` **[string][17]** explaining, why the topic will be set to value
-   `now` **([Date][22] \| [undefined][23])** current time. If not provided, it will be calculated.
                            usually only passed for debugging reasons. (optional, default `new Date()`)

### getDateOfNewestChange

Gets the latest Date of the message by browsing the reasons

Returns **[Date][22]** 

### toJSON

ensures that the JSON format is well formatted (value instead of \_value)

### validate

Checks the consistence of a message object

#### Parameters

-   `object` **[Object][16]** object to check or this


-   Throws **[error][24]** 

[1]: #reasonentry

[2]: #properties

[3]: #reason

[4]: #message

[5]: #parameters

[6]: #examples

[7]: #value

[8]: #parameters-1

[9]: #value-1

[10]: #addreason

[11]: #parameters-2

[12]: #getdateofnewestchange

[13]: #tojson

[14]: #validate

[15]: #parameters-3

[16]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[17]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[18]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[19]: #reasonentry

[20]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[21]: #reason

[22]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date

[23]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined

[24]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error
