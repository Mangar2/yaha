# Abstract

Main program, service to store messages and provide a rest api to access to stored messages an the message hierarchy
This service is implemented by connecting the mqttclient and the messagestore to a new service

## Meta

- **copyright**: Copyright (c) 2020 Volker Böhm

- **author**: Volker Böhm
- **license**: This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
    "as is", without any support, and with no warranty, express or implied, as to its usefulness for
    any purpose.

## Configuration example

You need to provide a file called "yahaconfig.json" in the installation root. This configuration file is designed to contain configuration for multiple services and for multiple environments ('development', 'test', 'staging', 'production')

```javascript
{
    "development": {
        "messageService": {
            "clientId": "yaha/external",
            "version": "0.0",
            "clean": true,
            "broker": {
                "port": 10000,
                "host": "192.168.0.4"
            },
            "listener": 10001,
            "keepAliveInSeconds": 600,
            "subscriptions": {
                "#": 1,
                "$SYS/#": 1
            },
            "log": [
            ]
        },
    }
}
```

- **clientId** name of the client, must be unique across all services
- **version** version of the interface (0.0 or 1.0)
- **clean** true, if the broker shall cleanup all messages on disconnect, false to buffer messages until the service is up again.
- **broker** information to connect to the broker
- **listener** port number to listen for broker messages, you may set any free port you like
- **keepAliveInSeconds** time between keep alive calls to the broker (usually pings)
- **subscriptions** messages that are subscribed and thus stores. Here all messages (the '#' is an MQTT wildchard and the special '$SYS/#' messages) are substribed. Please note that # matches all messages but $SYS messages, see MQTT documentation for details
- **log** settings to log incoming messages to the console
