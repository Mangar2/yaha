<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [MessageStore][1]
    -   [Parameters][2]
    -   [run][3]
    -   [close][4]
    -   [addMessage][5]
        -   [Parameters][6]
    -   [messages][7]
    -   [messages][8]
        -   [Parameters][9]

## 

**Meta**

-   **copyright**: Copyright (c) 2020 Volker Böhm

-   **author**: Volker Böhm
-   **license**: This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
    "as is", without any support, and with no warranty, express or implied, as to its usefulness for
    any purpose.

## MessageStore

Creates a message store object and configures it. Adds a listener for get requests

### Parameters

-   `options` **[Object][10]** message store parameters
    -   `options.persist` **[Object][10]** persistence configuraiton
        -   `options.persist.directory` **[string][11]** directory to persist data
        -   `options.persist.filename` **[string][11]** (base) filename to persist data (a timestamp is added)
        -   `options.persist.keepFiles` **[number][12]** amount of file versions to keep (including the recently written file)
        -   `options.persist.interval` **[number][12]** interval between file savings
    -   `options.tree` **[Object][10]** options of the message tree
        -   `options.tree.maxHistoryLength` **[number][12]** maximum amount of entries in the history array
        -   `options.tree.maxValuesLength` **[number][12]** maximum amount of values per history entry
        -   `options.tree.historyHysterese` **[number][12]** hysterese to cut history length
        -   `options.tree.upperBoundFactor` **[number][12]** upper bound to compare time spans (for inteval based compression)
        -   `options.tree.upperBoundAddInMilliseconds` **[number][12]** upper bound add to compare time spans
        -   `options.tree.lowerBoundFactor` **[number][12]** , lower bound factor to compare time spans
        -   `options.tree.lowerBoundSubInMilliseconds` **[number][12]** lower bound sub to compare time spans
    -   `options.server` **[Object][10]** 
        -   `options.server.port` **[number][12]** port to listen for get sensor data request
        -   `options.server.path` **[string][11]** path to use to listen for sensor data (without leading '/')

### run

Listens to a configures port

### close

Closes the broker, stops listening

### addMessage

Adds a message to the three node matching to the topic path.

#### Parameters

-   `message` **Message** {topic, value, reason}
    -   `message.topic` **[string][11]** topic string
    -   `message.value` **[Object][10]** value of the topic
    -   `message.reason` **[Array][13]&lt;[Object][10]>** list of reasons

### messages

Get the message tree

Returns **MessageTree** tree of messages

### messages

Set the message tree

#### Parameters

-   `messages` **MessageTree** tree of messages

[1]: #messagestore

[2]: #parameters

[3]: #run

[4]: #close

[5]: #addmessage

[6]: #parameters-1

[7]: #messages

[8]: #messages-1

[9]: #parameters-2

[10]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[11]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[12]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[13]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array
