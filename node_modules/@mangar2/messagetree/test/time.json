[
    {
        "description": "not compressed",
        "config": {
            "lengthForFurtherCompression": 4
        },
        "add": [
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"]
        ],
        "tests": [
            {
                "description": "not enough entries",
                "getNode": "a",
                "expected": {
                    "value": 1,
                    "reason": "same",
                    "history": [{
                        "type": "timeValue",
                        "reason": "same",
                        "values": [[ "timestamp", 1 ], ["timestamp", 1], ["timestamp", 1]]
                    }]
                }
            }
        ]
    },
    {
        "description": "not compressed",
        "config": {
            "lengthForFurtherCompression": 4
        },
        "add": [
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 2, "same"],
            ["a", 1, "same"]
        ],
        "tests": [
            {
                "description": "value is different",
                "getNode": "a",
                "expected": {
                    "value": 1,
                    "history": [{
                        "type": "timeValue",
                        "values": [[ "timestamp", 1 ], ["timestamp", 1], ["timestamp", 1], ["timestamp", 2]]
                    }]
                }
            }
        ]
    },
    {
        "description": "time",
        "config": {
            "lengthForFurtherCompression": 3,
            "upperBoundAddInMilliseconds": 1,
            "lowerBoundAddInMilliseconds": 1
        },
        "add": [
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"]
        ],
        "delay": [1,15,4,2],
        "tests": [
            {
                "description": "four",
                "getNode": "a",
                "expected": {
                    "value": 1,
                    "reason": "same",
                    "history": [{
                        "type": "time",
                        "value": 1,
                        "timestamps": ["timestamp", "timestamp", "timestamp"],
                        "reason": "same"
                        }]
                }
            }
        ]
    },
    {
        "description": "different value added to time",
        "config": {
            "lengthForFurtherCompression": 3,
            "upperBoundAddInMilliseconds": 1,
            "lowerBoundAddInMilliseconds": 1
        },
        "add": [
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 2, "same"],
            ["a", 1, "same"]
        ],
        "delay": [1,15,4,2],
        "tests": [
            {
                "description": "four",
                "getNode": "a",
                "expected": {
                    "value": 1,
                    "reason": "same",
                    "history": [
                        {
                            "type": "single",
                            "value": 2
                        },
                        {
                            "type": "time",
                            "value": 1,
                            "timestamps": ["timestamp", "timestamp", "timestamp"]
                        }
                    ]
                }
            }
        ]
    },
    {
        "description": "split time",
        "config": {
            "maxValuesPerHistoryEntry": 10,
            "lengthForFurtherCompression": 3,
            "upperBoundAddInMilliseconds": 1,
            "lowerBoundAddInMilliseconds": 1
        },
        "add": [
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"]
        ],
        "delay": [1,15,4,2,2,2,2,2,2,2],
        "tests": [
            {
                "description": "eight",
                "getNode": "a",
                "expected": {
                    "value": 1,
                    "reason": "same",
                    "history": [
                        {
                            "type": "interval",
                            "amount": 5,
                            "value": 1,
                            "reason": "same",
                            "firstTime": "timestamp",
                            "lastTime": "timestamp"
                        },
                        {
                            "type": "time",
                            "value": 1,
                            "timestamps": ["timestamp", "timestamp", "timestamp"],
                            "reason": "same"
                        }
                    ]
                }
            }
        ]
    },
    {
        "description": "overflow of time",
        "config": {
            "maxValuesPerHistoryEntry": 4,
            "lengthForFurtherCompression": 3,
            "upperBoundAddInMilliseconds": 1,
            "lowerBoundAddInMilliseconds": 1
        },
        "add": [
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"],
            ["a", 1, "same"]
        ],
        "delay": [1,15,4,2,2,2,2,2,2,2],
        "tests": [
            {
                "description": "six",
                "getNode": "a",
                "expected": {
                    "value": 1,
                    "reason": "same",
                    "history": [
                        {
                            "type": "single"
                        },
                        {
                            "type": "time",
                            "timestamps": ["timestamp", "timestamp", "timestamp", "timestamp"]
                        }
                    ]
                }
            }
        ]
    }
]