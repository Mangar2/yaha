{
    "rule": {
        "motion": {
            "rules": {
                "sleeping": {
                    "check": ["=", "system/state/presence", "awake"],
                    "durationWithoutMovementInMinutes": 15,
                    "anyOf": [
                        "first/required/motion"
                    ],
                    "allow": [
                        "first/one/motion",
                        "first/two/motion",
                        "first/three/motion"
                    ],
                    "topic": "system/state/presence",
                    "value": "sleeping"
                }
            }
        }
    },
    "tests": [
        {
            "name": "enough time passed",
            "variables": { "system/state/presence": "awake" },
            "minutes": -16,
            "motions": ["first/required/motion"],
            "results": [
                {
                    "topic": "system/state/presence",
                    "value": "sleeping",
                    "QoS": 1
                }
            ]
        },
        {
            "name": "not enough time passed",
            "variables": { "system/state/presence": "awake" },
            "minutes": -14,
            "motions": ["first/required/motion"],
            "results": []
        },
        {
            "name": "allowed motions",
            "variables": { "system/state/presence": "awake" },
            "minutes": -20,
            "motions": ["first/required/motion", "first/one/motion", "first/two/motion"],
            "results": [
                {
                    "topic": "system/state/presence",
                    "value": "sleeping",
                    "QoS": 1
                }
            ]
        },
        {
            "name": "only allowed motions, required motion missing",
            "variables": { "system/state/presence": "awake" },
            "minutes": -20,
            "motions": ["first/notallowed/motion", "first/two/motion"],
            "results": []
        },
        {
            "name": "not allowed motions",
            "variables": { "system/state/presence": "awake" },
            "minutes": -20,
            "motions": ["first/required/motion", "first/notallowed/motion", "first/two/motion"],
            "results": []
        },
        {
            "name": "already sleeping",
            "variables": { "system/state/presence": "sleeping" },
            "minutes": -20,
            "motions": ["first/required/motion"],
            "results": []
        },
        {
            "name": "absent",
            "variables": { "system/state/presence": "absent" },
            "minutes": -20,
            "motions": ["first/required/motion"],
            "results": []
        }

    ]
}
