{
    "rule": {
        "motion": {
            "rules": {
                "awake": {
                    "check": ["=", "system/state/presence", "sleeping"],
                    "time": "23:00",
                    "duration": "3:00",
                    "allOf": [
                        "first/required/motion"
                    ],
                    "noneOf": [
                        "first/one/motion",
                        "first/two/motion",
                        "first/three/motion"
                    ],
                    "topic": "system/state/presence",
                    "value": "awake"
                }
            }
        }
    },
    "subscriptions": 
    { 
        "$SYS/+/set": 2, "+/+/motion": 2, "system/state/presence": 2 
    },
    "tests": [
        {
            "name": "required motion",
            "variables": { "system/state/presence": "sleeping" },
            "time": "23:00",
            "motions": ["first/required/motion"],
            "results": [
                {
                    "topic": "system/state/presence",
                    "value": "awake",
                    "QoS": 1
                }
            ]
        },
        {
            "name": "required motion, later",
            "variables": { "system/state/presence": "sleeping" },
            "time": "23:59",
            "motions": ["first/required/motion"],
            "results": [
                {
                    "topic": "system/state/presence",
                    "value": "awake",
                    "QoS": 1
                }
            ]
        },
        {
            "name": "required motion, after midnight",
            "variables": { "system/state/presence": "sleeping" },
            "time": "1:59",
            "motions": ["first/required/motion"],
            "results": [
                {
                    "topic": "system/state/presence",
                    "value": "awake",
                    "QoS": 1
                }
            ]
        },
        {
            "name": "required and optional motion",
            "variables": { "system/state/presence": "sleeping" },
            "time": "23:00",
            "motions": ["first/required/motion", "cellar/optional/motion"],
            "results": [
                {
                    "topic": "system/state/presence",
                    "value": "awake",
                    "QoS": 1
                }
            ]
        },
        {
            "name": "too early",
            "variables": { "system/state/presence": "sleeping" },
            "time": "22:50",
            "motions": ["first/required/motion"],
            "results": [
            ]
        },
        {
            "name": "too late",
            "variables": { "system/state/presence": "sleeping" },
            "time": "2:00",
            "motions": ["first/required/motion"],
            "results": [
            ]
        },
        {
            "name": "denied motion",
            "variables": { "system/state/presence": "sleeping" },
            "time": "23:00",
            "motions": ["first/required/motion", "cellar/optional/motion", "first/one/motion"],
            "results": []
        },
        {
            "name": "several denied motion",
            "variables": { "system/state/presence": "sleeping" },
            "time": "23:00",
            "motions": ["first/required/motion", "first/one/motion", "first/two/motion", "first/three/motion"],
            "results": []
        },
        {
            "name": "no required motion",
            "variables": { "system/state/presence": "sleeping" },
            "time": "23:00",
            "motions": ["cellar/optional/motion"],
            "results": []
        }
    ]
}
