/**
 * @license
 * This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
 * "as is", without any support, and with no warranty, express or implied, as to its usefulness for
 * any purpose.
 *
 * @author Volker Böhm
 * @copyright Copyright (c) 2020 Volker Böhm
 */
'use strict'

const testMotionHistory = require('./testMotionHistory')
const Message = require('@mangar2/message')
const UnitTest = require('@mangar2/unittest')
const unitTest = new UnitTest(true, true)
const Motion = require('@mangar2/motion')

function testMotion () {
    const ruleTree = {
        motion: {
            rules: {
                sleeping: {
                    status: 'awake',
                    durationWithoutMovementInMinutes: 15,
                    require: [
                        'first/required/motion'
                    ],
                    allow: [
                        'first/bathroom/main',
                        'first/study/main',
                        'first/dressingroom/main'
                    ],
                    topic: 'system/state/presence',
                    value: 'sleeping'
                }
            }
        }
    }
    const motion = new Motion(ruleTree)
    motion.addMotion(new Message('first/required/motion', 1, 'hello world'))
    const result = motion.processRules()
    console.log(result)
}

testMotionHistory(unitTest)
testMotion()

unitTest.showResult(4)
