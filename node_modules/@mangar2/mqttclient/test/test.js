/**
 * ---------------------------------------------------------------------------------------------------
 * This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
 * "as is", without any support, and with no warranty, express or implied, as to its usefulness for
 * any purpose.
 *
 * Author:      Volker Böhm
 * Copyright:   Volker Böhm
 * ---------------------------------------------------------------------------------------------------
 */
'use strict'

const Client = require('../mqttclient')
const client = new Client({
    clientId: 'unique',
    broker: { host: 'myhost', port: 10000 },
    listener: 0,
    version: '1.0',
    keepAliveInSeconds: 300,
    clean: false,
    retry: 10,
    log: [{
        topic: '#',
        module: 'send',
        level: 1
    }]
})

async function test () {
    console.log('Host name and port will not be found "ENOTFOUND" errors expected')
    await client.run()
    await client.registerRecipient({ 'a/b': 1 }, (message) => console.log(message))
    await client.close()
    console.log('test successful, if this line is reached')
}

test()
