<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   -   [Examples][1]
-   [PublishMessage][2]
    -   [Parameters][3]
    -   [publish][4]
        -   [Parameters][5]
    -   [close][6]
-   [OnPublish][7]
    -   [Parameters][8]
    -   [listen][9]
    -   [on][10]
        -   [Parameters][11]
    -   [close][12]

## 

**Meta**

-   **copyright**: Copyright (c) 2020 Volker Böhm

-   **author**: Volker Böhm
-   **license**: This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
    "as is", without any support, and with no warranty, express or implied, as to its usefulness for
    any purpose.

## 

### Examples

```javascript
//Publish the message with topic /a/a, value 1, reason "test", QoS 0, retain 0:
const publish = new PublishMessage('myhost', 10000, { retry: 60 })
result = await publish.publish(publishtoken, new Message("/a/a", 1, "test"), 0, 0);
```

**Meta**

-   **copyright**: Copyright (c) 2020 Volker Böhm

-   **author**: Volker Böhm
-   **license**: This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
    "as is", without any support, and with no warranty, express or implied, as to its usefulness for
    any purpose.

## PublishMessage

Creates a client for publishing messages

### Parameters

-   `host` **[string][13]** host name (or ip)
-   `port` **[number][14]** port number
-   `configuration` **[Object][15]** configuration options
    -   `configuration.retry` **[number][14]** amount of retries to send a message (optional, default `60`)

### publish

Publishes a message with a defined quality of service automatically generating an id

#### Parameters

-   `token` **[string][13]** connection token
-   `message` **[Object][15]** message to publish.
-   `qos` **[number][14]** 0,1,2 quality of service
-   `retain` **[boolean][16]** True, if message shall be retained for future subscriptions (optional, default `false`)
-   `version` **([string][13] \| [undefined][17])** interface version, supports 0.0 and 1.0 (default) (optional, default `'1.0'`)


-   Throws **[string][13]** on any connection error

### close

Closes the connection to the broker

## 

**Meta**

-   **copyright**: Copyright (c) 2020 Volker Böhm

-   **author**: Volker Böhm
-   **license**: This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
    "as is", without any support, and with no warranty, express or implied, as to its usefulness for
    any purpose.

## OnPublish

Creates a new server receiving messages
Supports registering a callback with on('publish', (payload, qos) => {} ) called for each received message

### Parameters

-   `listenerPort` **[number][14]** port to listen on
-   `qos2PubrelTimeoutInSeconds` **[number][14]** time to delete qos2 related packageid´s from the qos2 queue.
    This will happen, if a pubrel does not follow the publish call for a this amount of seconds (optional, default `7200`)

### listen

Starts to listen and wait for input

### on

Sets a callback

#### Parameters

-   `event` **[string][13]** event name, supported 'publish'
-   `callback` **[function][18]** (payload, qos)
    where payload is the http payload, headers the http headers, res the result structure and path is
    is the http path as string

### close

Closes all connections

[1]: #examples

[2]: #publishmessage

[3]: #parameters

[4]: #publish

[5]: #parameters-1

[6]: #close

[7]: #onpublish

[8]: #parameters-2

[9]: #listen

[10]: #on

[11]: #parameters-3

[12]: #close-1

[13]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[14]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[15]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[16]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[17]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined

[18]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function
