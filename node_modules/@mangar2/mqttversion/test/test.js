/**
 * ---------------------------------------------------------------------------------------------------
 * This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
 * "as is", without any support, and with no warranty, express or implied, as to its usefulness for
 * any purpose.
 *
 * File:      mqttversion.js
 *
 * Author:      Volker Böhm
 * Copyright:   Volker Böhm
 * ---------------------------------------------------------------------------------------------------
 */

'use strict';

const mqttVersion = require('@mangar2/mqttversion');
const UnitTest = require('@mangar2/unittest');

var unitTest = new UnitTest(true);

let result = mqttVersion.receive({packetid : 1, qos : 1});
unitTest.assertEqual(JSON.stringify(result), '{"headers":{"Content-Type":"text/plain","version":"0.0"},"payload":"puback","httpcode":200}', "receive version 0 ");

result = mqttVersion.receive({packetid : 1, qos : 1, version : '1.0'});
unitTest.assertEqual(JSON.stringify(result), '{"headers":{"Content-Type":"application/json","version":"1.0","packet":"puback","packetid":1},"payload":"","httpcode":204}', "receive version 1 ");

unitTest.showResult(2);