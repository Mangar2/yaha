<!-- This file is generated by jsmddoc version 0.1 -->

# Abstract

Service to run operating system commands remotely and continuously send keep alive messages . It is used to include computers in the yaha home automation system . It can for example be used to shutdown a computer . Then switch of the power remotely once keep alive messages are no longer received . For security , it will only support remote commands configured in a configuration file , it will not directly process message content ( send as string ) on a remote computer .

## Contents

- [Meta](#Meta)
- [Type definitions](#Type-definitions)
- [Class RunCommand](#Class-RunCommand)
  - [Parameters](#RunCommand-Parameters)
  - [Methods](#RunCommand-Methods)
    - [on](#on)
    - [processMessage](#processMessage)

## Meta

| | |
| --- | --- |
| **File** | remotecontrol.js |
| **Abstract** | Service to run operating system commands remotely and continuously send keep alive messages . It is used to include computers in the yaha home automation system . It can for example be used to shutdown a computer . Then switch of the power remotely once keep alive messages are no longer received . For security , it will only support remote commands configured in a configuration file , it will not directly process message content ( send as string ) on a remote computer . |
| **Author** | Volker Böhm |
| **Copyright** | Copyright ( c ) 2020 Volker Böhm |
| **License** | This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3 . It is furnished "as is" , without any support , and with no warranty , express or implied , as to its usefulness for any purpose . |

## Type definitions

### Command {Object}

Command configuration structure
| Name | Type | Description |
| ---- | ---- | ------- |
| `name` | `string` | name of the command ( must be unique across all commands ) | |
| `command` | `string` | command to execute | |
| `delayInSeconds` | `number` | delay in seconds to wait before executing the command | |
| `value` | `string` | state value sended as a return message when executing the command | |

## Class RunCommand

`new RunCommand(options)`

Runs a configured operating-system command based on a message received

### RunCommand Parameters

| Name | Type | Description |
| ---------- | ------------ | ----------------- |
| `options` | `Object` | configuration options | |

#### options properties

| Name | Type | Description |
| ---------- | ------------ | ----------------- |
| `commands` | `Command, Array.<Command>` | command configuration | |
| `clientId` | `string` | id of the client running the command | |

### RunCommand Methods

#### on

`on (event, callback)`

Sets a callback .

##### on Parameters

| Name | Type | Description |
| ---------- | ------------ | ----------------- |
| `event` | `string` | event name ( not case sensitive ) for the callback | |
| `callback` | `function` | function ( . . . parameter ) | |

##### on throws

| Type | Description |
| ---- | ----------- |
| `Error` | if the event is not supported |
| `Error` | if the callback is not 'function' |

#### processMessage

`async processMessage (message)`

Excecutes a command coming from a message . The command is taken from the value

##### processMessage Parameters

| Name | Type | Description |
| ---------- | ------------ | ----------------- |
| `message` | `Message` | message received | |

#### message properties

| Name | Type | Description |
| ---------- | ------------ | ----------------- |
| `value` | `string` | command name . If it is 'stop' , the last command will be cancelled | |
| `topic` | `string` | topic of the command . A new message will terminate the ( delayed ) command of the last call with the same topic | |
