[
    {
        "description": "teststate",
        "messages": [
            { "topic": "a/b", "value": "on" },
            { "topic": "a/b/c", "value": "off" }
        ],
        "tests": [
            {
                "description": "set off",
                "delay": 10,
                "actionMessage": { "topic": "a/b/set", "value": "off" },
                "expected": [{ "topic": "a/b", "value": "off" }]
            },
            {
                "description": "set on",
                "delay": 10,
                "actionMessage": { "topic": "a/b/c/set", "value": "on" },
                "expected": [{ "topic": "a/b/c", "value": "on" }]
            }
        ]
    },
    {
        "description": "testblink",
        "options": { "blinkDelayInSeconds": 1 },
        "messages": [
            { "topic": "a/b", "value": "on" },
            { "topic": "a/b/c", "value": "off" },
            { "topic": "wait", "value": "off" }
        ],
        "tests": [
            {
                "description": "blink off once",
                "actionMessage": { "topic": "a/b/blink", "value": 1 },
                "delay": 4000,
                "expected": [
                    { "topic": "a/b", "value": "off" }, 
                    { "topic": "a/b", "value": "on" }
                ]
            },
            {
                "description": "blink off twice",
                "actionMessage": { "topic": "a/b/blink", "value": 2 },
                "delay": 6000,
                "expected": [
                    { "topic": "a/b", "value": "off" }, 
                    { "topic": "a/b", "value": "on" },
                    { "topic": "a/b", "value": "off" }, 
                    { "topic": "a/b", "value": "on" }

                ]
            },
            {
                "description": "blink on once",
                "actionMessage": { "topic": "a/b/c/blink", "value": 1 },
                "delay": 4000,
                "expected": [
                    { "topic": "a/b/c", "value": "on" }, 
                    { "topic": "a/b/c", "value": "off" }
                ]
            },
            {
                "description": "start blinking, not wait for result",
                "actionMessage": { "topic": "a/b/c/blink", "value": 1 },
                "delay": 10,
                "expected": [
                    { "topic": "a/b/c", "value": "on" }
                ]
            },
            {
                "description": "set a blinking device to on, blink will stop and not set to off",
                "actionMessage": { "topic": "a/b/c/set", "value": "on" },
                "delay": 2000,
                "expected": [
                    { "topic": "a/b/c", "value": "on" }
                ]
            }
        ]
    },
    {
        "description": "test temporary",
        "options": { "temporaryOnInSeconds": 1 },
        "messages": [
            { "topic": "a/b", "value": "on" },
            { "topic": "a/b/c", "value": "off" }
        ],
        "tests": [
            {
                "description": "temporary, already on",
                "actionMessage": { "topic": "a/b/temporary", "value": 1 },
                "delay": 3000,
                "expected": [
                    { "topic": "a/b", "value": "on" },
                    { "topic": "a/b", "value": "off" }
                ]
            },
            {
                "description": "temporary, currently off",
                "actionMessage": { "topic": "a/b/c/temporary", "value": 1 },
                "delay": 4000,
                "expected": [
                    { "topic": "a/b/c", "value": "on" }, 
                    { "topic": "a/b/c", "value": "off" }
                ]
            }
        ]
    }
]