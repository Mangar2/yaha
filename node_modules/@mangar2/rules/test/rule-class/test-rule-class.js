/**
 * @license
 * This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
 * "as is", without any support, and with no warranty, express or implied, as to its usefulness for
 * any purpose.
 *
 * @author Volker BÃ¶hm
 * @copyright Copyright (c) 2020 Volker BÃ¶hm
 */
'use strict'

const VERBOSE = true
const { Rules } = require('@mangar2/rules') 

const Testrun = require('@mangar2/testrun')
const testrun = new Testrun(VERBOSE)


testrun.on('prepare', testcase => {
    const rules = new Rules(testcase.ruleTree)
    return { rules }
})

function runTest (test, rules) {
    const result = {
        rules: rules.rules,
        tree: rules.getRuleTree(),
        invalid: rules.invalidRules
    }
    return result
}

testrun.on('run', (test, rules) => {
    return runTest(test, rules)
})

testrun.on('break', (test, rules) => {
    runTest(test, rules)
})


testrun.run( [ 'basic' ], __dirname, 98, 'js')

