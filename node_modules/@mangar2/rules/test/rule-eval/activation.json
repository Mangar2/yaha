[
    {
        "description": "activation",
        "rule": {
            "topic": "activation",
            "check": [
                ">",
                "/time",
                "8:00"
            ],
            "value": 0
        },
        "tests": [
            {
                "description": "does not activate too early",
                "time": "7:00:00",
                "expected": {
                    "messages": []
                }
            },
            {
                "description": "activate at 8:00:01",
                "time": "8:00:01",
                "expected": {
                    "messages": [
                        {
                            "topic": "activation",
                            "value": 0
                        }
                    ]
                }
            },
            {
                "description": "does not activate twice",
                "time": "8:00:02",
                "expected": {
                    "messages": []
                }
            },
            {
                "description": "resets activation if not triggered",
                "time": "7:00:00",
                "expected": {
                    "messages": []
                }
            },
            {
                "description": "now activates again",
                "time": "8:00:02",
                "expected": {
                    "messages": [{ "topic": "activation"}]
                }
            }
        ]
    },
    {
        "description": "compare time with variable",
        "rule": {
            "topic": "compare time",
            "check": [
                ">",
                "/time",
                "test/eight"
            ],
            "value": 0
        },
        "tests": [
            {
                "description": "does not activate too early",
                "time": "7:00:00",
                "variables": {
                    "test/eight": "8:00"
                },
                "expected": {
                    "messages": []
                }
            },
            {
                "description": "activate at 8:00:01",
                "time": "8:00:01",
                "variables": {
                    "test/eight": "8:00"
                },
                "expected": {
                    "messages": [{ "topic": "compare time" }]
                }
            }
        ]
    }
]