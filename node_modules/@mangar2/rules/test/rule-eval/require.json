[
    {
        "description": "allOf two motionEvents",
        "rule": {
            "allOf": ["/eventAll1", "/eventAll2"],
            "topic": "topic",
            "value": "value"
        },
        "tests": [
            {
                "description": "none provided",
                "time": "8:00",
                "motionEvents": [],
                "expected": { "messages": [] }
            },
            {
                "description": "all provided",
                "time": "10:00",
                "motionEvents": ["/eventAll1", "/eventAll2"],
                "expected": { "messages": [{ "topic": "topic" }] }
            },
            {
                "description": "one provided",
                "time": "10:00",
                "motionEvents": ["/eventAll1"],
                "expected": { "messages": [] }
            }
        ]
    },
    {
        "description": "allOf two non Motion events",
        "rule": {
            "allOf": ["/eventAll1", "/eventAll2"],
            "topic": "topic",
            "value": "value"
        },
        "tests": [
            {
                "description": "none provided",
                "nonMotionEvents": [],
                "expected": { "messages": [] }
            },
            {
                "description": "all provided",
                "nonMotionEvents": ["/eventAll1", "/eventAll2"],
                "expected": { "messages": [{ "topic": "topic" }] }
            },
            {
                "description": "one provided",
                "nonMotionEvents": ["/eventAll1"],
                "expected": { "messages": [] }
            }
        ]
    },
    {
        "description": "anyOf two motionEvents",
        "rule": {
            "anyOf": ["/eventAny1", "/eventAny2"],
            "topic": "topic",
            "value": "value"
        },
        "tests": [
            {
                "description": "none provided",
                "time": "8:00",
                "motionEvents": [],
                "expected": { "messages": [] }
            },
            {
                "description": "all provided",
                "time": "10:00",
                "motionEvents": ["/eventAny1", "/eventAny2"],
                "expected": { "messages": [{ "topic": "topic" }] }
            },
            {
                "documentation": "success, (note: motionEvents can be processed twice)",
                "description": "one provided, fail",
                "time": "10:00",
                "motionEvents": ["/eventAny1"],
                "expected": { "messages": [{ "topic": "topic" }] }
            },
            {
                "documentation": "Succeeds, because now eventAny1 is new (later time)",
                "description": "one provided, success",
                "time": "10:01",
                "motionEvents": ["/eventAny1"],
                "expected": { "messages": [{ "topic": "topic" }] }
            }
        ]
    },
    {
        "description": "anyOf two non motion Events",
        "rule": {
            "anyOf": ["/eventAny1", "/eventAny2"],
            "topic": "topic",
            "value": "value"
        },
        "tests": [
            {
                "description": "none provided",
                "nonMotionEvents": [],
                "expected": { "messages": [] }
            },
            {
                "description": "all provided",
                "nonMotionEvents": ["/eventAny1", "/eventAny2"],
                "expected": { "messages": [{ "topic": "topic" }] }
            },
            {
                "documentation": "success, (note: motionEvents can be processed twice)",
                "description": "one provided, fail",
                "nonMotionEvents": ["/eventAny1"],
                "expected": { "messages": [{ "topic": "topic" }] }
            },
            {
                "documentation": "Succeeds, because now eventAny1 is new (later time)",
                "description": "one provided, success",
                "nonMotionEvents": ["/eventAny1"],
                "expected": { "messages": [{ "topic": "topic" }] }
            }
        ]
    },
    {
        "description": "anyOf with wildchards",
        "rule": {
            "check": ["=", "$SYS/presence", "initial"],
            "topic": ["$SYS/presence", "system/state/presence"],
            "anyOf": [
                "+/+/+/motion sensor/detection state"
            ],
            "value": "awake"
        },
        "tests": [
            {
                "description": "initialize to awake",
                "variables": { "$SYS/presence": "initial" },
                "time": "8:00",
                "motionEvents": ["first/floor/main/motion sensor/detection state"],
                "expected": { "messages": [{ "topic": "$SYS/presence" }, { "topic": "system/state/presence" }] },
                "topic": ["$SYS/presence", "system/state/presence"],
                "value": ["awake", "awake"]
            }
        ]
    }
]