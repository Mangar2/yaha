[
    {
        "description": "basic value",
        "rule": {
            "topic": "topic",
            "value": "hello",
            "qos": 0,
            "cooldownInSeconds": 0
        },
        "tests": [
            {
                "description": "simple value",
                "expected": {
                    "messages": [
                        {
                            "topic": "topic",
                            "value": "hello",
                            "qos": 0
                        }
                    ]
                }
            }
        ]
    },
    {
        "description": "value with variable",
        "rule": {
            "topic": "topic",
            "value": "/hello",
            "qos": 2,
            "cooldownInSeconds": 0
        },
        "tests": [
            {
                "description": "value with variable",
                "variables": {
                    "/hello": "one"
                },
                "expected": {
                    "messages": [
                        {
                            "topic": "topic",
                            "value": "one",
                            "qos": 2
                        }
                    ]
                }
            }
        ]
    },
    {
        "description": "value with calculation",
        "rule": {
            "topic": "topic",
            "value": [
                "switch",
                "/variable",
                {
                    "one": "on",
                    "two": "off"
                }
            ],
            "cooldownInSeconds": 0
        },
        "tests": [
            {
                "description": "value with variable is one ",
                "variables": {
                    "/variable": "one"
                },
                "expected": {
                    "messages": [
                        {
                            "topic": "topic",
                            "value": "on"
                        }
                    ]
                }
            },
            {
                "description": "value with variable is two ",
                "variables": {
                    "/variable": "two"
                },
                "expected": {
                    "messages": [
                        {
                            "topic": "topic",
                            "value": "off",
                            "qos": 1
                        }
                    ]
                }
            }
        ]
    },
    {
        "description": "value in topic",
        "rule": {
            "topic": {
                "sendTopic": "on"
            },
            "cooldownInSeconds": 0
        },
        "tests": [
            {
                "description": "value in topic",
                "expected": {
                    "messages": [
                        {
                            "topic": "sendTopic",
                            "value": "on",
                            "qos": 1
                        }
                    ]
                }
            }
        ]
    },
    {
        "description": "multiple topics",
        "rule": {
            "topic": {
                "sendTopic1": "on",
                "sendTopic2": "off"
            },
            "cooldownInSeconds": 0
        },
        "tests": [
            {
                "description": "multiple topics with multiple values",
                "expected": {
                    "messages": [
                        {
                            "topic": "sendTopic1",
                            "value": "on",
                            "qos": 1
                        },
                        {
                            "topic": "sendTopic2",
                            "value": "off",
                            "qos": 1
                        }
                    ]
                }
            }
        ]
    },
    {
        "description": "multiple value with",
        "rule": {
            "topic": {
                "sendTopic1": [
                    "switch",
                    "/variable",
                    {
                        "one": "absent",
                        "two": "present"
                    }
                ],
                "sendTopic2": "off"
            },
            "cooldownInSeconds": 0
        },
        "tests": [
            {
                "description": "value with variable is one ",
                "variables": {
                    "/variable": "one"
                },
                "expected": {
                    "messages": [
                        {
                            "topic": "sendTopic1",
                            "value": "absent",
                            "qos": 1
                        },
                        {
                            "topic": "sendTopic2",
                            "value": "off",
                            "qos": 1
                        }
                    ]
                }
            },
            {
                "description": "value with variable is two ",
                "variables": {
                    "/variable": "two"
                },
                "expected": {
                    "messages": [
                        {
                            "topic": "sendTopic1",
                            "value": "present",
                            "qos": 1
                        },
                        {
                            "topic": "sendTopic2",
                            "value": "off",
                            "qos": 1
                        }
                    ]
                }
            }
        ]
    }
]