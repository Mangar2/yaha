[
    {
        "description": "basic value",
        "rule": {
            "topic": "topic",
            "value": "hello",
            "qos": 0,
            "cooldownInSeconds": 0
        },
        "tests": [
            {
                "description": "simple value",
                "messages": 1,
                "topic": "topic",
                "value": "hello",
                "qos": 0
            }
        ]
    },
    {
        "description": "value with variable",
        "rule": {
            "topic": "topic",
            "value": "/hello",
            "qos": 2,
            "cooldownInSeconds": 0
        },
        "tests": [
            {
                "description": "value with variable",
                "variables": {"/hello": "one"},
                "messages": 1,
                "topic": "topic",
                "value": "one",
                "qos": 2
            }
        ]
    },
    {
        "description": "value with calculation",
        "rule": {
            "topic": "topic",
            "value": ["switch", "/variable", { "one": "on", "two": "off" }],
            "cooldownInSeconds": 0
        },
        "tests": [
            {
                "description": "value with variable is one ",
                "variables": {"/variable": "one"},
                "messages": 1,
                "topic": "topic",
                "value": "on"
            },
            {
                "description": "value with variable is two ",
                "variables": {"/variable": "two"},
                "messages": 1,
                "topic": "topic",
                "value": "off",
                "qos": 1
            }
        ]
    },
    {
        "description": "value in topic",
        "rule": {
            "topic": { "sendTopic" : "on" },
            "cooldownInSeconds": 0
        },
        "tests": [
            {
                "description": "value in topic",
                "messages": 1,
                "topic": "sendTopic",
                "value": "on",
                "qos": 1
            }
        ]
    },
    {
        "description": "multiple topics",
        "rule": {
            "topic": { "sendTopic1" : "on", "sendTopic2" : "off" },
            "cooldownInSeconds": 0
        },
        "tests": [
            {
                "description": "multiple topics with multiple values",
                "messages": 2,
                "topic": "sendTopic1",
                "value": 1,
                "qos": 1
            }
        ]
    },
    {
        "description": "multiple value with",
        "rule": {
            "topic": { "sendTopic1" : ["switch", "/variable", { "one": "absent", "two": "present" }], "sendTopic2" : "off" },
            "cooldownInSeconds": 0
        },
        "tests": [
            {
                "description": "value with variable is one ",
                "variables": {"/variable": "one"},
                "messages": 2,
                "topic": ["sendTopic1", "sendTopic2"],
                "value": ["absent", 0],
                "qos": [1, 1]
            },
            {
                "description": "value with variable is two ",
                "variables": {"/variable": "two"},
                "messages": 2,
                "topic": ["sendTopic1", "sendTopic2"],
                "value": ["present", 0],
                "qos": [1, 1]
            }
        ]
    }

]
