<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: time.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: time.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @license
 * This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
 * "as is", without any support, and with no warranty, express or implied, as to its usefulness for
 * any purpose.
 *
 * @author Volker Böhm
 * @copyright Copyright (c) 2020 Volker Böhm
 */

'use strict'

const types = require('@mangar2/types')

/**
 * Converts a time string in format HH:MM or HH:MM:SS or MMM to seconds
 * @param {string} timeString delta time
 * @throws {Error} on false date format
 * @returns {number} time string in seconds
 */
function stringToSeconds (timeString) {
    let minus = 1
    let result = 0
    if (timeString.length > 0 &amp;&amp; timeString.charAt(0) === '-') {
        minus = -1
        timeString = timeString.substr(1)
    }
    const timeChunks = timeString.trim().split(':')

    for (let index = 0; index &lt; timeChunks.length; index++) {
        timeChunks[index] = parseInt(timeChunks[index])
        if (!Number.isInteger(timeChunks[index])) {
            throw Error('Illegal time format: ' + timeString)
        }
    }

    if (timeChunks.length === 1) {
        result = timeChunks[0] * 60
    } else if (timeChunks.length >= 2) {
        result = timeChunks[0] * 60 * 60
        result += timeChunks[1] * 60
        if (timeChunks.length === 3) {
            result += timeChunks[2]
        }
    }
    result *= minus
    return result
}

/**
 * Checks, if a string is a time of day string (HH:MM or HH:MM:SS)
 * @param {string} timeString delta time
 * @returns {boolean} true, if the string is a time of day string
 */
function isTimeOfDayString (timeString) {
    let result = false
    if (types.isString(timeString)) {
        const timeChunks = timeString.trim().split(':')
        result = timeChunks.length > 1 &amp;&amp; timeChunks.length &lt;= 3
        let maxInt = 23
        for (let chunk of timeChunks) {
            chunk = parseInt(chunk)
            if (!Number.isInteger(chunk) || chunk &lt; 0 || chunk > maxInt) {
                result = false
                break
            }
            maxInt = 59
        }
    }
    return result
}

/**
 * Converts a time string in format HH:MM or HH:MM:SS or MMM to a date (today, same time of day)
 * @param {string} timeString time of day
 * @throws {Error} on false time format
 * @returns {Date} today, hours, minutes, seconds set to the time of day string
 */
function timeOfDayStringToDate (timeString) {
    const result = new Date()
    const seconds = timeString === undefined ? 0 : stringToSeconds(timeString)
    result.setHours(0, 0, seconds, 0)
    return result
}

/**
 * Gets the seconds since midnight of a date.
 * @param {Date} date date to concider
 * @returns {number} amount of seconds passed since midnight
 */
function dateToTimeOfDayInSeconds (date) {
    const midnight = new Date(date)
    midnight.setHours(0, 0, 0)
    const result = (date - midnight) / 1000
    return result
}

module.exports = {
    isTimeOfDayString,
    stringToSeconds,
    timeOfDayStringToDate,
    dateToTimeOfDayInSeconds
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#dateToTimeOfDayInSeconds">dateToTimeOfDayInSeconds</a></li><li><a href="global.html#isTimeOfDayString">isTimeOfDayString</a></li><li><a href="global.html#stringToSeconds">stringToSeconds</a></li><li><a href="global.html#timeOfDayStringToDate">timeOfDayStringToDate</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Sat Mar 14 2020 08:12:22 GMT+0100 (GMT+01:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
