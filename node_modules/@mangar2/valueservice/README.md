<!-- This file is generated by jsmddoc version 0.1 -->

# Abstract

JSON schema to check configuration input

Default values

Checks the configuration and sets default values

Provides a service providing variables for values

JSON schema to check configuration input

## Contents

- [Meta](#Meta)
- [Global Functions](#Global-functions)
  - [prepare](#prepare)
- [Class ValueService](#Class-ValueService)
  - [Parameters](#ValueService-Parameters)
  - [Methods](#ValueService-Methods)
    - [getSubscriptions](#getSubscriptions)
    - [handleMessage](#handleMessage)
    - [on](#on)
    - [processMessage](#processMessage)
    - [run](#run)
    - [setVariables](#setVariables)

## Meta

| | |
| --- | --- |
| **File** | index.js |
| **Abstract** | Provides a service providing variables for values |
| **Author** | Volker Böhm |
| **Copyright** | Copyright ( c ) 2022 Volker Böhm |
| **License** | This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3 . It is furnished "as is" , without any support , and with no warranty , express or implied , as to its usefulness for any purpose . |

## Global functions

### prepare

`prepare (config, values) => {Values}`

Prepares the values

#### prepare Parameters

| Name | Type | Attribute | Default | Description |
| ---------- | ------------ | ------------ | ------------ | ----------------- |
| `config` | `Object` |  |  | values configuration | |
| `values` | `Values` | optional | null | existing values class | |

#### prepare returns

| Type | Description |
| ---- | ----------- |
| `Values` | the prepared values object |

## Class ValueService

`new ValueService(configuration)`

Creates a values class . Values holds variables with values This class is designed to work togehter with the runservices service

### ValueService Parameters

| Name | Type |
| ---------- | ------------ |
| `configuration` | `Object` | |

#### configuration properties

| Name | Type | Attribute | Default | Description |
| ---------- | ------------ | ------------ | ------------ | ----------------- |
| `subscribeQoS` | `number` | optional | 1 | quality of service for message subscription | |

### ValueService Methods

#### getSubscriptions

`getSubscriptions () => {Array.<string>}`

Get all the variable set commands to subscribe to

##### getSubscriptions returns

| Type | Description |
| ---- | ----------- |
| `Array.<string>` | array of subscriptions |

#### handleMessage

`handleMessage (mqttMessage) => {Array.<Message>}`

Fully handles an mqtt message

##### handleMessage Parameters

| Name | Type | Description |
| ---------- | ------------ | ----------------- |
| `mqttMessage` | `Message` | the received mqtt message | |

##### handleMessage returns

| Type | Description |
| ---- | ----------- |
| `Array.<Message>` | array of reply messages |

#### on

`on (event, callback)`

Sets a callback .

##### on Parameters

| Name | Type | Description |
| ---------- | ------------ | ----------------- |
| `event` | `string` | event name ( not case sensitive ) for the callback | |
| `callback` | `function` | function ( . . . parameter ) | |

##### on throws

| Type | Description |
| ---- | ----------- |
| `Error` | if the event is not supported |
| `Error` | if the callback is not 'function' |

#### processMessage

`processMessage (message) => {Array.<Message>}`

Checks receives messages and sets variables for any "set" message

##### processMessage Parameters

| Name | Type | Description |
| ---------- | ------------ | ----------------- |
| `message` | `Message` | received message | |

##### processMessage returns

| Type | Description |
| ---- | ----------- |
| `Array.<Message>` | list of messages as result |

#### run

`run ()`

Called once after registration to handle additional tasks

#### setVariables

`setVariables (rulesTree)`

Sets/replaces the rules tree

##### setVariables Parameters

| Name | Type | Description |
| ---------- | ------------ | ----------------- |
| `rulesTree` | `Object` | tree with 'rules' elements | |
