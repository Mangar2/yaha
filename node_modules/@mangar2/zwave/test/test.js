/**
 * @license
 * This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
 * "as is", without any support, and with no warranty, express or implied, as to its usefulness for
 * any purpose.
 *
 * @author Volker Böhm
 * @copyright Copyright (c) 2020 Volker Böhm
 */

'use strict'

const VERBOSE = true
const types = require('@mangar2/types')
const ZwaveDevices = require('../zwavedevices')
const TestRun = require('@mangar2/testrun')

const testRun = new TestRun(VERBOSE)

testRun.on('prepare', (testCase) => {
    const devices = new ZwaveDevices(testCase)
    return devices
})

testRun.on('break', (test, devices) => {
    
})

testRun.on('run', (test, devices) => {
    let result
    result = devices.valueToTopic(test.value)
    return result
})

testRun.on('validate', (test, result, path) => {
    if (!testRun._unitTest.assertEqual(result, test.result)) {
        console.log("result: " + result)
        testRun.runAgain()
    }
})

testRun.run([
    'devices'
], __dirname)

testRun.unitTest.showResult(1)
