<!-- This file is generated by jsmddoc version 0.1 -->

# Abstract

Stores messages and checks , if a new message ( usually a reply ) matches one of the send messages It only matches "action messages" , i . e . messages whose topic ends on '/set' , '/get' , '/temporary' , or '/blink'

## Contents

- [Meta](#Meta)
- [Class MatchMessages](#Class-MatchMessages)
  - [Methods](#MatchMessages-Methods)
    - [addReceivedMessage](#addReceivedMessage)
    - [constructor](#constructor)
    - [hasMatchingMessage](#hasMatchingMessage)
    - [matchAndUpdateReplyMessage](#matchAndUpdateReplyMessage)

## Meta

| | |
| --- | --- |
| **File** | matchmessages.js |
| **Abstract** | Stores messages and checks , if a new message ( usually a reply ) matches one of the send messages It only matches "action messages" , i . e . messages whose topic ends on '/set' , '/get' , '/temporary' , or '/blink' |
| **Author** | Volker Böhm |
| **Copyright** | Copyright ( c ) 2020 Volker Böhm |
| **License** | This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3 . It is furnished "as is" , without any support , and with no warranty , express or implied , as to its usefulness for any purpose . |

## Class MatchMessages

`new MatchMessages()`

Matches incoming "set" messages and outgoing messages to fill up the reason info

### Example

```javascript
const match = new MatchMessages()
match.addReceivedMessage(new Message('a/b', 'on', 'just a reason'))
const replyMessage = new Message('a/b', 'on', 'reply')
replyMessage = match.matchAndUpdateReplyMessage(replyMessage)
```

### MatchMessages Methods

#### addReceivedMessage

`addReceivedMessage (message)`

Adds a message to the received message list to match it with a reply

##### addReceivedMessage Parameters

| Name | Type | Description |
| ---------- | ------------ | ----------------- |
| `message` | `Message` | message to store in the "received message list" | |

#### constructor

`constructor ()`

Constructs a new MatchMessage

#### hasMatchingMessage

`hasMatchingMessage (message) => {boolean}`

Checks , if a reply message matches any message received lately ( in the last 30 seconds )

##### hasMatchingMessage Parameters

| Name | Type | Description |
| ---------- | ------------ | ----------------- |
| `message` | `Message` | message to match | |

##### hasMatchingMessage returns

| Type | Description |
| ---- | ----------- |
| `boolean` | true , if the message has a matching message with the same topic |

#### matchAndUpdateReplyMessage

`matchAndUpdateReplyMessage (message) => {Message}`

Matches a reply message with a received message , updates the reasons and removes the received message from the message list The messages matches , if the have the save core topic ( topic without action , 'set' , 'get' , 'temporary' , 'blink' ) and the same value

##### matchAndUpdateReplyMessage Parameters

| Name | Type | Description |
| ---------- | ------------ | ----------------- |
| `message` | `Message` | message to match | |

##### matchAndUpdateReplyMessage returns

| Type | Description |
| ---- | ----------- |
| `Message` | matched message with updated reason or unchanged message , if the message do not match with a stored message |
