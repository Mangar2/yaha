/**
 * @license
 * This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
 * "as is", without any support, and with no warranty, express or implied, as to its usefulness for
 * any purpose.
 *
 * @author Volker Böhm
 * @copyright Copyright (c) 2020 Volker Böhm
 */

'use strict'

const { isTimeOfDayString, stringToSeconds, timeOfDayStringToDate, dateToTimeOfDayInSeconds } = require('@mangar2/time')
const { Types } = require('@mangar2/utils')

const { TestRun } = require('@mangar2/unittest')
const VERBOSE = true

const testRun = new TestRun(VERBOSE)

testRun.on('prepare', (testcase) => {
    return testcase.function
})

testRun.on('run', (test, testcase) => {
    let result
    try {
        switch (testcase) {
        case 'isTimeOfDayString': result = isTimeOfDayString(test.timeOfDay); break
        case 'stringToSeconds': result = stringToSeconds(test.timeOfDay); break
        case 'timeOfDayStringToDate': {
            const date = timeOfDayStringToDate(test.timeOfDay) 
            if (Types.isDate(date)) result = date.getTime()
            break
        }
        case 'dateToTimeOfDayInSeconds' : {
            result = dateToTimeOfDayInSeconds(test.date)
        }
        }
    }
    catch (err) {
        result = err.message
    }
    return result
})


module.exports = () => testRun.run(['time-testcases'], __dirname, 3, 'js')


