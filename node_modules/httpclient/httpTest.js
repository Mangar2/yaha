/**
 * ---------------------------------------------------------------------------------------------------
 * This software is licensed under the GNU LESSER GENERAL PUBLIC LICENSE Version 3. It is furnished
 * "as is", without any support, and with no warranty, express or implied, as to its usefulness for
 * any purpose.
 *
 * File:        test.js
 * Purpouse:    test file for httpclient
 *
 * Author:      Volker Böhm
 * Copyright:   Volker Böhm
 * Version:     1.0
 * ---------------------------------------------------------------------------------------------------
 */

 'use strict'

 const HttpClient = require("@mangar2/httpclient");
 let shutdown = require("@mangar2/shutdown");
 let client = new HttpClient("127.0.0.1", 9001);
 let client2 = new HttpClient("192.198.0.127", 9000);

 client.on("result", result => console.log(result))
 // Success, if http server is started too
 client.send("/clients", "GET", "test", {'Content-Type': 'application/json', packetId: 1, mqttpacket: "publish"} );

 client2.on("result", result => console.log(result))
 // Creates a timeout
 client2.send("/clients", "GET", "test", {'Content-Type': 'application/json', packetId: 1, mqttpacket: "publish"} );

 shutdown(async () => {
    await HttpClient.close();
    process.exit(0);
});